# 登录页面预览

## 页面效果说明

### 登录页面 (UserLogin.vue)

```
┌─────────────────────────────────────────┐
│                                         │
│        EHS 系统登录                      │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 身份选择                           │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 企业 ▼                        │ │ │  <- 下拉框，默认选择"企业"
│  │ └───────────────────────────────┘ │ │     选项：企业、承包商、系统管理
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 用户名                             │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入用户名                   │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 密码                               │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入密码                     │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │          登录                      │ │  <- 蓝色按钮
│  └───────────────────────────────────┘ │
│                                         │
│  ─────────────────────────────────────  │
│                                         │
│  还没有账号？ ┌──────────────┐         │
│              │  立即注册     │         │  <- 白底蓝边按钮
│              └──────────────┘         │
│                                         │
└─────────────────────────────────────────┘
```

### 注册页面 (UserRegister.vue)

```
┌─────────────────────────────────────────┐
│                                         │
│        EHS 系统注册                      │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 身份选择 *                         │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 企业 ▼                        │ │ │  <- 下拉框，默认"企业"
│  │ └───────────────────────────────┘ │ │     选项：企业、承包商
│  │ 系统管理员账号需要联系管理员创建    │ │  <- 灰色提示文字
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 用户名 *                           │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入用户名                   │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 密码 *                             │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入密码（至少6位）          │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 确认密码 *                         │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请再次输入密码                 │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 姓名 *                             │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入真实姓名                 │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 手机号 *                           │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入手机号                   │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 邮箱                               │ │
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入邮箱（选填）             │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 企业名称 *                         │ │  <- 仅企业用户显示
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入企业名称                 │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 职位                               │ │  <- 仅企业用户显示
│  │ ┌───────────────────────────────┐ │ │
│  │ │ 请输入职位（选填）             │ │ │
│  │ └───────────────────────────────┘ │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │          注册                      │ │  <- 绿色按钮
│  └───────────────────────────────────┘ │
│                                         │
│  ─────────────────────────────────────  │
│                                         │
│  已有账号？   ┌──────────────┐         │
│              │  立即登录     │         │  <- 白底蓝边按钮
│              └──────────────┘         │
│                                         │
└─────────────────────────────────────────┘
```

## 功能特性

### 1. 登录页面
- **身份选择下拉框**：用户可以选择三种身份类型
  - 企业（默认）
  - 承包商
  - 系统管理
- **用户名输入框**：输入用户名
- **密码输入框**：输入密码
- **登录按钮**：提交登录表单
- **注册按钮**：跳转到注册页面

### 2. 注册页面
- **身份选择下拉框**：用户可以选择两种身份类型
  - 企业（默认）
  - 承包商
  - 提示：系统管理员账号需要联系管理员创建
- **基本信息**：
  - 用户名（必填，唯一）
  - 密码（必填，至少6位）
  - 确认密码（必填）
  - 姓名（必填）
  - 手机号（必填，格式验证）
  - 邮箱（选填）
- **企业用户特有字段**（选择"企业"时显示）：
  - 企业名称（必填）
  - 职位（选填）
- **承包商用户特有字段**（选择"承包商"时显示）：
  - 承包商公司名称（必填）
- **注册按钮**：提交注册表单
- **登录按钮**：跳转到登录页面

## 样式设计

### 颜色方案
- **主色调**：蓝色 (#007bff)
- **成功色**：绿色 (#28a745)
- **错误色**：红色 (#dc3545)
- **背景色**：浅灰色 (#f5f5f5)
- **卡片背景**：白色 (#ffffff)

### 交互效果
- **输入框焦点**：边框变为蓝色
- **按钮悬停**：背景色加深
- **加载状态**：按钮禁用，显示"登录中..."或"注册中..."
- **错误提示**：红色背景的提示框
- **成功提示**：绿色背景的提示框

### 响应式设计
- 卡片最大宽度：400px（登录）/ 500px（注册）
- 自适应移动设备
- 垂直滚动支持（注册页面）

## 用户体验优化

1. **默认值设置**：身份选择默认为"企业"
2. **动态表单**：根据身份类型显示不同字段
3. **实时验证**：前端表单验证，即时反馈
4. **友好提示**：清晰的中文错误信息
5. **自动跳转**：注册成功后3秒自动跳转到登录页
6. **防重复提交**：提交时禁用按钮
7. **密码确认**：确保两次输入一致
8. **手机号验证**：符合中国手机号格式

## 路由配置

- 登录页面：`/login`
- 注册页面：`/register`
- 两个页面都设置为游客可访问（requiresGuest）
- 已登录用户访问时自动跳转到仪表板

## API 接口

### 登录接口
- **路径**：`POST /token`
- **参数**：username, password（FormData格式）
- **返回**：access_token, token_type

### 注册接口
- **路径**：`POST /register`
- **参数**：RegisterRequest（JSON格式）
- **返回**：message, user_id

## 安全特性

1. **密码加密**：使用bcrypt加密存储
2. **用户名唯一性**：注册前检查
3. **输入验证**：前后端双重验证
4. **错误处理**：完善的异常捕获
5. **SQL注入防护**：使用ORM参数化查询

